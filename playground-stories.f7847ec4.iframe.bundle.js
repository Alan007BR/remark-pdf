"use strict";(self.webpackChunkremark_pdf=self.webpackChunkremark_pdf||[]).push([[795],{"./stories/playground.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MarkdownToPdf:()=>MarkdownToPdf,__namedExportsOrder:()=>__namedExportsOrder,default:()=>playground_stories});var react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/unified/lib/index.js"),remark_parse=__webpack_require__("./node_modules/remark-parse/index.js"),remark_gfm=__webpack_require__("./node_modules/remark-gfm/index.js"),remark_frontmatter=__webpack_require__("./node_modules/remark-frontmatter/index.js");const error=message=>{throw new Error(message)},isBrowser=()=>{try{return"undefined"!=typeof window}catch(e){return!1}},HEADING_1="head1",HEADING_2="head2",HEADING_3="head3",HEADING_4="head4",HEADING_5="head5",HEADING_6="head6";function convertNodes(nodes,ctx){const results=[];for(const node of nodes)switch(node.type){case"paragraph":results.push(buildParagraph(node,ctx));break;case"heading":results.push(buildHeading(node,ctx));break;case"thematicBreak":results.push({margin:[0,12,0,0],canvas:[{type:"line",x1:0,y1:0,x2:514,y2:0}]});break;case"blockquote":results.push(buildBlockquote(node,ctx));break;case"list":results.push(buildList(node,ctx));break;case"listItem":case"tableRow":case"tableCell":error("unreachable");break;case"table":results.push(buildTable(node,ctx));break;case"html":results.push(buildHtml(node,ctx));break;case"code":results.push(buildCode(node,ctx));break;case"yaml":case"toml":case"definition":case"footnoteDefinition":case"linkReference":case"imageReference":case"footnoteReference":break;case"text":case"inlineCode":results.push(buildText(node.value,ctx));break;case"emphasis":case"strong":case"delete":{const{type,children}=node;results.push(...convertNodes(children,{...ctx,deco:{...ctx.deco,[type]:!0}}));break}case"break":results.push(buildBreak(node,ctx));break;case"link":results.push(...buildLink(node,ctx));break;case"image":results.push(buildImage(node,ctx.images));break;case"footnote":results.push(...buildFootnote(node,ctx));break;case"math":results.push(buildMath(node,ctx));break;case"inlineMath":results.push(buildInlineMath(node,ctx));break;default:}return results}function buildParagraph({type,children},ctx){return{text:convertNodes(children,ctx)}}function buildHeading({type,children,depth},ctx){let heading;switch(depth){case 1:heading=HEADING_1;break;case 2:heading=HEADING_2;break;case 3:heading=HEADING_3;break;case 4:heading=HEADING_4;break;case 5:heading=HEADING_5;break;case 6:heading=HEADING_6}return{text:convertNodes(children,ctx),style:heading}}function buildBlockquote({type,children},ctx){return{text:convertNodes(children,ctx)}}function buildList({type,children,ordered,start,spread},ctx){return ordered?{ol:children.map((l=>buildListItem(l,ctx)))}:{ul:children.map((l=>buildListItem(l,ctx)))}}function buildListItem({type,children,checked,spread},ctx){return convertNodes(children,ctx)}function buildTable({type,children,align},ctx){const cellAligns=align?.map((a=>{switch(a){case"left":default:return"left";case"right":return"right";case"center":return"center"}}));return{table:{body:children.map((r=>function buildTableRow({type,children},ctx,cellAligns){return children.map(((c,i)=>function buildTableCell({type,children},ctx,align){return convertNodes(children,{...ctx,deco:{...ctx.deco,align}})}(c,ctx,cellAligns?.[i])))}(r,ctx,cellAligns)))}}}function buildHtml({type,value},ctx){return{text:buildText(value,ctx)}}function buildCode({type,value,lang,meta},ctx){return{text:buildText(value,ctx)}}function buildMath({type,value},ctx){return{text:buildText(value,ctx)}}function buildInlineMath({type,value},ctx){return buildText(value,ctx)}function buildText(text,ctx){const content={text};return ctx.deco.strong&&((content.style||(content.style={})).bold=ctx.deco.strong),ctx.deco.emphasis&&((content.style||(content.style={})).italics=ctx.deco.emphasis),ctx.deco.delete&&(content.decoration="lineThrough"),null!=ctx.deco.link&&(content.link=ctx.deco.link,content.color="blue"),null!=ctx.deco.align&&((content.style||(content.style={})).alignment=ctx.deco.align),content}function buildBreak({type},ctx){return buildText("",ctx)}function buildLink({type,children,url,title},ctx){return convertNodes(children,{...ctx,deco:{...ctx.deco,link:url}})}function buildImage({type,url,title,alt},images){return{image:url}}function buildFootnote({type,children},ctx){return convertNodes(children,ctx)}var pdfmake=__webpack_require__("./node_modules/pdfmake/build/pdfmake.js"),vfs_fonts=__webpack_require__("./node_modules/pdfmake/build/vfs_fonts.js");pdfmake.vfs=vfs_fonts.I.vfs;const src_plugin=function(opts={}){let images={};this.Compiler=node=>function mdastToPdf(node,{output,info,pageMargins,pageOrientation,pageSize,userPassword,ownerPassword,permissions,version,watermark},images,build){return build({info,pageMargins,pageOrientation,pageSize,userPassword,ownerPassword,permissions,version,watermark,content:convertNodes(node.children,{deco:{},images}),images,defaultStyle:{font:isBrowser()?"Roboto":"Helvetica"},styles:{[HEADING_1]:{fontSize:24},[HEADING_2]:{fontSize:22},[HEADING_3]:{fontSize:20},[HEADING_4]:{fontSize:18},[HEADING_5]:{fontSize:16},[HEADING_6]:{fontSize:14}}})}(node,opts,images,(def=>{const pdf=pdfmake.createPdf(def);switch(opts.output??"buffer"){case"buffer":return new Promise((resolve=>{pdf.getBuffer(resolve)}));case"blob":return new Promise((resolve=>{pdf.getBlob(resolve)}))}}))};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const style={flex:1,padding:10,overflowY:"scroll"},textAreaStyle={width:"100%",height:"100%"},text_editor=(0,react.forwardRef)((({initialValue},ref)=>(0,jsx_runtime.jsx)("div",{style,children:(0,jsx_runtime.jsx)("textarea",{ref,style:textAreaStyle,defaultValue:initialValue})})));var FileSaver_min=__webpack_require__("./node_modules/file-saver/dist/FileSaver.min.js");const toPdfProcessor=(0,lib.l)().use(remark_parse.Z).use(remark_gfm.Z).use(remark_frontmatter.Z).use(src_plugin,{output:"blob"}),playground_stories={parameters:{storySource:{source:'import React, { useMemo, useRef, useState } from "react";\nimport { unified } from "unified";\nimport markdown from "remark-parse";\nimport gfm from "remark-gfm";\nimport frontmatter from "remark-frontmatter";\nimport pdf from "../src";\nimport TextEditor from "./components/text-editor";\n// @ts-expect-error no type definition\nimport text from "../fixtures/article.md";\nimport { saveAs } from "file-saver";\n\nconst fetchImage = async (\n  url: string\n): Promise<{ image: ArrayBuffer; width: number; height: number }> => {\n  const image = new Image();\n  const res = await fetch(url);\n  const buf = await res.arrayBuffer();\n  return new Promise((resolve, reject) => {\n    image.onload = () => {\n      resolve({\n        image: buf,\n        width: image.naturalWidth,\n        height: image.naturalHeight,\n      });\n    };\n    image.onerror = reject;\n    image.src = URL.createObjectURL(new Blob([buf], { type: "image/png" }));\n  });\n};\n\nconst toPdfProcessor = unified()\n  .use(markdown)\n  .use(gfm)\n  .use(frontmatter)\n  .use(pdf, { output: "blob" });\n\nconst toPdf = async (s: string) => {\n  const doc = await toPdfProcessor.process(s);\n  return doc.result;\n};\n\nexport default {\n  title: "Playground",\n};\n\nconst Wrapper = ({ children }: { children: React.ReactNode }) => (\n  <div\n    style={useMemo(\n      () => ({\n        width: "100vw",\n        height: "100vh",\n        display: "flex",\n        flexDirection: "row",\n        fontSize: "10.5pt",\n      }),\n      []\n    )}\n  >\n    {children}\n  </div>\n);\n\nexport const MarkdownToPdf = () => {\n  const ref = useRef<HTMLTextAreaElement>(null);\n  return (\n    <>\n      <div style={{ padding: 10 }}>\n        <button\n          style={{ height: "100%" }}\n          onClick={async () => {\n            if (!ref.current) return;\n            const blob = await toPdf(ref.current.value);\n            saveAs(blob, "example.pdf");\n          }}\n        >\n          {"convert to pdf"}\n        </button>\n      </div>\n      <Wrapper>\n        <TextEditor ref={ref} initialValue={text} />\n      </Wrapper>\n    </>\n  );\n};\n',locationsMap:{"markdown-to-pdf":{startLoc:{col:29,line:63},endLoc:{col:1,line:84},startBody:{col:29,line:63},endBody:{col:1,line:84}}}}},title:"Playground"},Wrapper=({children})=>(0,jsx_runtime.jsx)("div",{style:(0,react.useMemo)((()=>({width:"100vw",height:"100vh",display:"flex",flexDirection:"row",fontSize:"10.5pt"})),[]),children});Wrapper.displayName="Wrapper";const MarkdownToPdf=()=>{const ref=(0,react.useRef)(null);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{padding:10},children:(0,jsx_runtime.jsx)("button",{style:{height:"100%"},onClick:async()=>{if(!ref.current)return;const blob=await(async s=>(await toPdfProcessor.process(s)).result)(ref.current.value);(0,FileSaver_min.saveAs)(blob,"example.pdf")},children:"convert to pdf"})}),(0,jsx_runtime.jsx)(Wrapper,{children:(0,jsx_runtime.jsx)(text_editor,{ref,initialValue:'---\ntitle: "This is frontmatter"\ndate: 2020-04-30 12:34\ncategories: [JavaScript, React]\n---\n\n# heading 1\n\n## heading 2\n\n### heading 3\n\n#### heading 4\n\n##### heading 5\n\n###### heading 6\n\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n\naaaaaaaa**bold**_emphasis_~~delete~~`inline code`\n\n- list\n\n  - list\n    - list\n  - list\n  - list\n\n- [ ] not checked\n- [x] checked\n\n1. ordered list\n1. ordered list\n1. ordered list\n   1. aaa\n   1. aaa\n      1. eeeee\n      1. eeeee\n   1. aaa\n1. ordered list\n\nThis is [link to GitHub.com](https://github.com/).\n\nThis is ![image](https://github.githubassets.com/images/modules/logos_page/Octocat.png).\n\n> quote\n> quote\n> quote\n> quote\n\n> quote\n>\n> > quoted quote\n\n| Left align | Right align | Center align |\n| :--------- | ----------: | :----------: |\n| This       |        This |     This     |\n| column     |      column |    column    |\n| will       |        will |     will     |\n| be         |          be |      be      |\n| left       |       right |    center    |\n| aligned    |     aligned |   aligned    |\n\n<div style="color:red;">\nThis is <u>HTML</u>\n</div>\n\n---\n\n---\n\n```javascript\nfunction $initHighlight(block, cls) {\n  try {\n    if (cls.search(/\\bno\\-highlight\\b/) != -1)\n      return process(block, true, 0x0F) +\n             ` class="${cls}"`;\n  } catch (e) {\n    /* handle exception */\n  }\n  for (var i = 0 / 2; i < classes.length; i++) {\n    if (checkCondition(classes[i]) === undefined)\n      console.log(\'undefined\');\n  }\n\n  return (\n    <div>\n      <web-component>{block}</web-component>\n    </div>\n  )\n}\n\nexport  $initHighlight;\n```\n'})})]})},__namedExportsOrder=["MarkdownToPdf"]}}]);